GO111MODULE=on go test -v --count=1 --parallel=1 -p=1 ./raft -run 2AB
=== RUN   TestLeaderStartReplication2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
--- PASS: TestLeaderStartReplication2AB (0.00s)
=== RUN   TestLeaderCommitEntry2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 2 2] mid: 2[0m
--- PASS: TestLeaderCommitEntry2AB (0.00s)
=== RUN   TestLeaderAcknowledgeCommit2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 2 2] mid: 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 0 1 1] mid: 0[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 4 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 5 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 0 1 1] mid: 0[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 4 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 5 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1 2 2] mid: 1[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 0 1 1] mid: 0[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 4 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 5 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1 2 2] mid: 1[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 0 1 1] mid: 0[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 4 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 5 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1 2 2] mid: 1[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 4 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 2 2 2 2] mid: 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 0 1 1] mid: 0[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 4 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 5 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1 2 2] mid: 1[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 4 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 2 2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 5 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 2 2 2 2] mid: 2[0m
--- PASS: TestLeaderAcknowledgeCommit2AB (0.00s)
=== RUN   TestLeaderCommitPrecedingEntries2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 3[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:1 ] [{EntryNormal 3 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:1 ] [{EntryNormal 3 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 3 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 3 1 [] {} [] 0} {EntryNormal 3 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:1  term:3 index:2 data:"some data" ] [{EntryNormal 3 1 [] {} [] 0} {EntryNormal 3 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:1  term:3 index:2 data:"some data" ] [{EntryNormal 3 1 [] {} [] 0} {EntryNormal 3 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 2] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:2 data:"some data" ] [{EntryNormal 3 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:1  term:3 index:2 data:"some data" ] [{EntryNormal 3 1 [] {} [] 0} {EntryNormal 3 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 2] mid: 1[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:2 data:"some data" ] [{EntryNormal 3 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 2 2] mid: 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 1  ents: [{EntryNormal 2 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 3[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:2 ] [{EntryNormal 3 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:2 ] [{EntryNormal 3 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 2 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] new_entries_len: 1 li: 2[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 2 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0} {EntryNormal 3 3 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:2  term:3 index:3 data:"some data" ] [{EntryNormal 3 2 [] {} [] 0} {EntryNormal 3 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:2  term:3 index:3 data:"some data" ] [{EntryNormal 3 2 [] {} [] 0} {EntryNormal 3 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 2 3] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:3 data:"some data" ] [{EntryNormal 3 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:2  term:3 index:3 data:"some data" ] [{EntryNormal 3 2 [] {} [] 0} {EntryNormal 3 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 2 3] mid: 2[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 3 3] mid: 3[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 2 to 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:3 data:"some data" ] [{EntryNormal 3 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [3 3 3] mid: 3[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 3[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:3 ] [{EntryNormal 3 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:3 ] [{EntryNormal 3 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}] new_entries_len: 1 li: 3[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:3  term:3 index:4 data:"some data" ] [{EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:3  term:3 index:4 data:"some data" ] [{EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 3 4] mid: 3[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:4 data:"some data" ] [{EntryNormal 3 4 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:3  term:3 index:4 data:"some data" ] [{EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [3 3 4] mid: 3[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [3 4 4] mid: 4[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 3 to 4[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:4 data:"some data" ] [{EntryNormal 3 4 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [4 4 4] mid: 4[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 1  ents: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 3[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:2 ] [{EntryNormal 3 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:2 ] [{EntryNormal 3 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] new_entries_len: 1 li: 2[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0} {EntryNormal 3 3 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:2  term:3 index:3 data:"some data" ] [{EntryNormal 3 2 [] {} [] 0} {EntryNormal 3 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:2  term:3 index:3 data:"some data" ] [{EntryNormal 3 2 [] {} [] 0} {EntryNormal 3 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 2 3] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:3 data:"some data" ] [{EntryNormal 3 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:2  term:3 index:3 data:"some data" ] [{EntryNormal 3 2 [] {} [] 0} {EntryNormal 3 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 2 3] mid: 2[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 3 3] mid: 3[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 2 to 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:3 data:"some data" ] [{EntryNormal 3 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [3 3 3] mid: 3[0m
--- PASS: TestLeaderCommitPrecedingEntries2AB (0.00s)
=== RUN   TestFollowerCommitEntry2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 1 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [] tmp: [{EntryNormal 1 1 [115 111 109 101 32 100 97 116 97] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 1 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [] tmp: [{EntryNormal 1 1 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97 50] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97 50] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 1 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [] tmp: [{EntryNormal 1 1 [115 111 109 101 32 100 97 116 97 50] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [115 111 109 101 32 100 97 116 97 50] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 1 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [] tmp: [{EntryNormal 1 1 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97 50] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97 50] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 1[0m
--- PASS: TestFollowerCommitEntry2AB (0.00s)
=== RUN   TestFollowerCheckMessageType_MsgAppend2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 1 reject append rpc from Node 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 1 reject append rpc from Node 2[0m
--- PASS: TestFollowerCheckMessageType_MsgAppend2AB (0.00s)
=== RUN   TestFollowerAppendEntries2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [{EntryNormal 3 3 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}][0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [{EntryNormal 3 2 [] {} [] 0} {EntryNormal 4 3 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0} {EntryNormal 4 3 [] {} [] 0}][0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [{EntryNormal 3 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 3 1 [] {} [] 0}][0m
--- PASS: TestFollowerAppendEntries2AB (0.00s)
=== RUN   TestLeaderSyncFollowerLog2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 10  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 9  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 9[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 7) received a message with greater Term 9[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 9 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:6, m.Index:10, lastTerm:6, lastIndex:9)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 9[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 9[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 9 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 10[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:6 index:10  term:9 index:11 ] [{EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 10)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0}] tmp: [{EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 10[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (11,12)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 11 11] mid: 11[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 10 to 11[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] tmp: [] [local commit: 10][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 10 -> 11[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] new_entries_len: 1 li: 11[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:9 index:12 ] [{EntryNormal 9 12 [] {} [] 0}] (start with idx 12)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11  term:9 index:12 ] [{EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] tmp: [{EntryNormal 9 12 [] {} [] 0}] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (12,13)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 12 12] mid: 12[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 11 to 12[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11  term:9 index:12 ] [{EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] tmp: [] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 11 -> 12[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 10  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 4  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 9[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 7) received a message with greater Term 9[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 9 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:6, m.Index:10, lastTerm:4, lastIndex:4)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 9[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 9[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 9 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 10[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:6 index:10  term:9 index:11 ] [{EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 10)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 9[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 9)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 8[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:6 index:8  term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 8)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 7[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:5 index:7  term:6 index:8  term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 7)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 6[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:5 index:6  term:5 index:7  term:6 index:8  term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 6)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 5[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:4 index:5  term:5 index:6  term:5 index:7  term:6 index:8  term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 5)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0}] tmp: [{EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 10[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (11,12)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 11 11] mid: 11[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 10 to 11[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] tmp: [] [local commit: 10][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 10 -> 11[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] new_entries_len: 1 li: 11[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:9 index:12 ] [{EntryNormal 9 12 [] {} [] 0}] (start with idx 12)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11  term:9 index:12 ] [{EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] tmp: [{EntryNormal 9 12 [] {} [] 0}] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (12,13)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 12 12] mid: 12[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 11 to 12[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11  term:9 index:12 ] [{EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] tmp: [] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 11 -> 12[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 10  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 11  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 6 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 9[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 7) received a message with greater Term 9[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 9 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: false (m.LogTerm:6, m.Index:10, lastTerm:6, lastIndex:11)[0m
2020/07/14 20:59:24 raft.go:494: [0;37m[info] Node 1 received rejection from node 2 at term 9[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 3 at term 9[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 9[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 6 11 [] {} [] 0}] tmp: [{EntryNormal 9 11 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 10[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 9 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (11,12)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 11 11] mid: 11[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 10 to 11[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] tmp: [] [local commit: 10][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 10 -> 11[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] new_entries_len: 1 li: 11[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:9 index:12 ] [{EntryNormal 9 12 [] {} [] 0}] (start with idx 12)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11  term:9 index:12 ] [{EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] tmp: [{EntryNormal 9 12 [] {} [] 0}] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (12,13)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 12 12] mid: 12[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 11 to 12[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11  term:9 index:12 ] [{EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] tmp: [] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 11 -> 12[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 10  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 12  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 7 11 [] {} [] 0} {EntryNormal 7 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 9[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 7) received a message with greater Term 9[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 9 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: false (m.LogTerm:6, m.Index:10, lastTerm:7, lastIndex:12)[0m
2020/07/14 20:59:24 raft.go:494: [0;37m[info] Node 1 received rejection from node 2 at term 9[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 3 at term 9[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 9[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 7 11 [] {} [] 0} {EntryNormal 7 12 [] {} [] 0}] tmp: [{EntryNormal 9 11 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 10[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 9 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (11,12)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 11 11] mid: 11[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 10 to 11[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] tmp: [] [local commit: 10][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 10 -> 11[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] new_entries_len: 1 li: 11[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:9 index:12 ] [{EntryNormal 9 12 [] {} [] 0}] (start with idx 12)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11  term:9 index:12 ] [{EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] tmp: [{EntryNormal 9 12 [] {} [] 0}] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (12,13)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 12 12] mid: 12[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 11 to 12[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11  term:9 index:12 ] [{EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] tmp: [] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 11 -> 12[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 10  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 7  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 4 6 [] {} [] 0} {EntryNormal 4 7 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 9[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 7) received a message with greater Term 9[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 9 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:6, m.Index:10, lastTerm:4, lastIndex:7)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 9[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 9[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 9 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 10[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:6 index:10  term:9 index:11 ] [{EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 10)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 9[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 9)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 8[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:6 index:8  term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 8)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 7[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:5 index:7  term:6 index:8  term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 7)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 6[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:5 index:6  term:5 index:7  term:6 index:8  term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 6)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 4 6 [] {} [] 0} {EntryNormal 4 7 [] {} [] 0}] tmp: [{EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 10[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (11,12)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 11 11] mid: 11[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 10 to 11[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] tmp: [] [local commit: 10][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 10 -> 11[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] new_entries_len: 1 li: 11[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:9 index:12 ] [{EntryNormal 9 12 [] {} [] 0}] (start with idx 12)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11  term:9 index:12 ] [{EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] tmp: [{EntryNormal 9 12 [] {} [] 0}] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (12,13)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 12 12] mid: 12[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 11 to 12[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11  term:9 index:12 ] [{EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] tmp: [] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 11 -> 12[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 10  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 11  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 3 7 [] {} [] 0} {EntryNormal 3 8 [] {} [] 0} {EntryNormal 3 9 [] {} [] 0} {EntryNormal 3 10 [] {} [] 0} {EntryNormal 3 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 9[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 7) received a message with greater Term 9[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 9 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:6, m.Index:10, lastTerm:3, lastIndex:11)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 9[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 9[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 9 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 10[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:6 index:10  term:9 index:11 ] [{EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 10)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 9[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 9)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 8[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:6 index:8  term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 8)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 7[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:5 index:7  term:6 index:8  term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 7)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 6[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:5 index:6  term:5 index:7  term:6 index:8  term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 6)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 5[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:4 index:5  term:5 index:6  term:5 index:7  term:6 index:8  term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 5)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 4[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:4 index:4  term:4 index:5  term:5 index:6  term:5 index:7  term:6 index:8  term:6 index:9  term:6 index:10  term:9 index:11 ] [{EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 3 7 [] {} [] 0} {EntryNormal 3 8 [] {} [] 0} {EntryNormal 3 9 [] {} [] 0} {EntryNormal 3 10 [] {} [] 0} {EntryNormal 3 11 [] {} [] 0}] tmp: [{EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 10[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (11,12)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 11 11] mid: 11[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 10 to 11[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11 ] [{EntryNormal 9 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] tmp: [] [local commit: 10][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 10 -> 11[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] new_entries_len: 1 li: 11[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:9 index:12 ] [{EntryNormal 9 12 [] {} [] 0}] (start with idx 12)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11  term:9 index:12 ] [{EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0}] tmp: [{EntryNormal 9 12 [] {} [] 0}] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (12,13)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 12 12] mid: 12[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 11 to 12[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:9 index:11  term:9 index:12 ] [{EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}] tmp: [] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 4 4 [] {} [] 0} {EntryNormal 4 5 [] {} [] 0} {EntryNormal 5 6 [] {} [] 0} {EntryNormal 5 7 [] {} [] 0} {EntryNormal 6 8 [] {} [] 0} {EntryNormal 6 9 [] {} [] 0} {EntryNormal 6 10 [] {} [] 0} {EntryNormal 9 11 [] {} [] 0} {EntryNormal 9 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 11 -> 12[0m
--- PASS: TestLeaderSyncFollowerLog2AB (0.00s)
=== RUN   TestVoteRequest2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 1 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 1 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:288: [0;37m[info] Node 1 election timeout.[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 1 (Term: 0) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:288: [0;37m[info] Node 1 election timeout.[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 3[0m
--- PASS: TestVoteRequest2AB (0.00s)
=== RUN   TestLeaderOnlyCommitsLogFromCurrentTerm2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 3[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:3 ] [{EntryNormal 3 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}] new_entries_len: 1 li: 3[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:3  term:3 index:4 ] [{EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 4] mid: 1[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 3[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:3 ] [{EntryNormal 3 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}] new_entries_len: 1 li: 3[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:3  term:3 index:4 ] [{EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 4] mid: 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 3[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:3 ] [{EntryNormal 3 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}] new_entries_len: 1 li: 3[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:3  term:3 index:4 ] [{EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [3 4] mid: 3[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:4 ] [{EntryNormal 3 4 [] {} [] 0}] (start with idx 4)[0m
--- PASS: TestLeaderOnlyCommitsLogFromCurrentTerm2AB (0.00s)
=== RUN   TestProgressLeader2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1  term:1 index:2 data:"foo" ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0}] new_entries_len: 1 li: 2[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0} {EntryNormal 1 3 [102 111 111] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1  term:1 index:2 data:"foo"  term:1 index:3 data:"foo" ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0} {EntryNormal 1 3 [102 111 111] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0} {EntryNormal 1 3 [102 111 111] {} [] 0}] new_entries_len: 1 li: 3[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0} {EntryNormal 1 3 [102 111 111] {} [] 0} {EntryNormal 1 4 [102 111 111] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1  term:1 index:2 data:"foo"  term:1 index:3 data:"foo"  term:1 index:4 data:"foo" ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0} {EntryNormal 1 3 [102 111 111] {} [] 0} {EntryNormal 1 4 [102 111 111] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0} {EntryNormal 1 3 [102 111 111] {} [] 0} {EntryNormal 1 4 [102 111 111] {} [] 0}] new_entries_len: 1 li: 4[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0} {EntryNormal 1 3 [102 111 111] {} [] 0} {EntryNormal 1 4 [102 111 111] {} [] 0} {EntryNormal 1 5 [102 111 111] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1  term:1 index:2 data:"foo"  term:1 index:3 data:"foo"  term:1 index:4 data:"foo"  term:1 index:5 data:"foo" ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0} {EntryNormal 1 3 [102 111 111] {} [] 0} {EntryNormal 1 4 [102 111 111] {} [] 0} {EntryNormal 1 5 [102 111 111] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0} {EntryNormal 1 3 [102 111 111] {} [] 0} {EntryNormal 1 4 [102 111 111] {} [] 0} {EntryNormal 1 5 [102 111 111] {} [] 0}] new_entries_len: 1 li: 5[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0} {EntryNormal 1 3 [102 111 111] {} [] 0} {EntryNormal 1 4 [102 111 111] {} [] 0} {EntryNormal 1 5 [102 111 111] {} [] 0} {EntryNormal 1 6 [102 111 111] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1  term:1 index:2 data:"foo"  term:1 index:3 data:"foo"  term:1 index:4 data:"foo"  term:1 index:5 data:"foo"  term:1 index:6 data:"foo" ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 111] {} [] 0} {EntryNormal 1 3 [102 111 111] {} [] 0} {EntryNormal 1 4 [102 111 111] {} [] 0} {EntryNormal 1 5 [102 111 111] {} [] 0} {EntryNormal 1 6 [102 111 111] {} [] 0}] (start with idx 1)[0m
--- PASS: TestProgressLeader2AB (0.00s)
=== RUN   TestLeaderElectionOverwriteNewerLogs2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 1  ents: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 1  ents: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 1  ents: [{EntryNormal 2 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 2[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:1, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 1: canVote: true, isUptoData: false (m.LogTerm:1, m.Index:1, lastTerm:2, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 4 handle requestVote rpc from Node 1: canVote: false, isUptoData: true (m.LogTerm:1, m.Index:1, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 5 handle requestVote rpc from Node 1: canVote: false, isUptoData: true (m.LogTerm:1, m.Index:1, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 2[0m
2020/07/14 20:59:24 raft.go:494: [0;37m[info] Node 1 received rejection from node 3 at term 2[0m
2020/07/14 20:59:24 raft.go:494: [0;37m[info] Node 1 received rejection from node 4 at term 2[0m
2020/07/14 20:59:24 raft.go:494: [0;37m[info] Node 1 received rejection from node 5 at term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 3[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 2) received a message with greater Term 3[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 3 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:1, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 2) received a message with greater Term 3[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 3 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 1: canVote: true, isUptoData: false (m.LogTerm:1, m.Index:1, lastTerm:2, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 4 (Term: 2) received a message with greater Term 3[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 4 become follower at term 3 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 4 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:1, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 5 (Term: 2) received a message with greater Term 3[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 5 become follower at term 3 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 5 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:1, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 3[0m
2020/07/14 20:59:24 raft.go:494: [0;37m[info] Node 1 received rejection from node 3 at term 3[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 4 at term 3[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:2 ] [{EntryNormal 3 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:2 ] [{EntryNormal 3 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:3 index:2 ] [{EntryNormal 3 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:3 index:2 ] [{EntryNormal 3 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 3 2 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 3 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 4 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 5 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 3 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 3 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 4 become follower at term 3 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 5 become follower at term 3 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 0 2 2] mid: 0[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 3 Next -> 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1  term:3 index:2 ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 4 Next -> 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1  term:3 index:2 ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 5 Next -> 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1  term:3 index:2 ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 2 1 [] {} [] 0}] tmp: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 4: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 5: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1  term:3 index:2 ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1  term:3 index:2 ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 4 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 2 2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 5 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 2 2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 0 -> 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 4 update commit index from 0 -> 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 3 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 5 update commit index from 0 -> 2[0m
--- PASS: TestLeaderElectionOverwriteNewerLogs2AB (0.00s)
=== RUN   TestLogReplication2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"somedata" ] [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"somedata" ] [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"somedata" ] [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"somedata" ] [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"somedata" ] [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"somedata" ] [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 2 become candidate at term 2[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 1 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 1 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:2, lastTerm:1, lastIndex:2)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:2, lastTerm:1, lastIndex:2)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 2 received vote from node 1 at term 2[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 2 become leader at term 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:3 ] [{EntryNormal 2 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:3 ] [{EntryNormal 2 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [{EntryNormal 2 3 [] {} [] 0}] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [{EntryNormal 2 3 [] {} [] 0}] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 1 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 3 3] mid: 3[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 2 to 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:3 ] [{EntryNormal 2 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [3 3 3] mid: 3[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] tmp: [] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 2 -> 3[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] tmp: [] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 2 -> 3[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] new_entries_len: 1 li: 3[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:4 data:"somedata" ] [{EntryNormal 2 4 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:4 data:"somedata" ] [{EntryNormal 2 4 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] tmp: [{EntryNormal 2 4 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 3][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] tmp: [{EntryNormal 2 4 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 3][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 1 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [3 4 4] mid: 4[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 3 to 4[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:4 data:"somedata" ] [{EntryNormal 2 4 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [4 4 4] mid: 4[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 3][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 3 -> 4[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 3][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 3 -> 4[0m
--- PASS: TestLogReplication2AB (0.00s)
=== RUN   TestSingleNodeCommit2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] new_entries_len: 1 li: 2[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [3] mid: 3[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 2 to 3[0m
--- PASS: TestSingleNodeCommit2AB (0.00s)
=== RUN   TestCommitWithoutNewTermEntry2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 4 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 5 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 4 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 4 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 4 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 5 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 5 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 5 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 3 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 4: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 5: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 4 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 5 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 0 1 1] mid: 0[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 4 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 5 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 4 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 5 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:2 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1 2 2] mid: 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] new_entries_len: 1 li: 2[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:3 data:"some data" ] [{EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data"  term:1 index:3 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:2 data:"some data"  term:1 index:3 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:2 data:"some data"  term:1 index:3 data:"some data" ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0}] tmp: [{EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1 3 3] mid: 1[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 2 become candidate at term 2[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 1 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 1 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:3, lastTerm:1, lastIndex:3)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:3, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 4 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 4 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 4 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:3, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 5 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 5 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 5 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:3, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 2 received vote from node 1 at term 2[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 2 received vote from node 3 at term 2[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 2 become leader at term 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:4 ] [{EntryNormal 2 4 [] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:4 ] [{EntryNormal 2 4 [] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 4: [term:2 index:4 ] [{EntryNormal 2 4 [] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 5: [term:2 index:4 ] [{EntryNormal 2 4 [] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0}] tmp: [{EntryNormal 2 4 [] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 3 reject append rpc from Node 2[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 4 reject append rpc from Node 2[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 5 reject append rpc from Node 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 4 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 5 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 1 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 0 4 4] mid: 0[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 2 receives a rejection append response, update Node 3 Next -> 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:1 index:3 data:"some data"  term:2 index:4 ] [{EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 2 receives a rejection append response, update Node 4 Next -> 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 4: [term:1 index:3 data:"some data"  term:2 index:4 ] [{EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 2 receives a rejection append response, update Node 5 Next -> 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 5: [term:1 index:3 data:"some data"  term:2 index:4 ] [{EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 3 reject append rpc from Node 2[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 4 reject append rpc from Node 2[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 5 reject append rpc from Node 2[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 2 receives a rejection append response, update Node 3 Next -> 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:1 index:2 data:"some data"  term:1 index:3 data:"some data"  term:2 index:4 ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 2 receives a rejection append response, update Node 4 Next -> 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 4: [term:1 index:2 data:"some data"  term:1 index:3 data:"some data"  term:2 index:4 ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 2 receives a rejection append response, update Node 5 Next -> 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 5: [term:1 index:2 data:"some data"  term:1 index:3 data:"some data"  term:2 index:4 ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 4 4 4] mid: 4[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 1 to 4[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 4: [term:1 index:2 data:"some data"  term:1 index:3 data:"some data"  term:2 index:4 ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 5: [term:1 index:2 data:"some data"  term:1 index:3 data:"some data"  term:2 index:4 ] [{EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 4 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 4 4 4 4] mid: 4[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 5 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [4 4 4 4 4] mid: 4[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 1 -> 4[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 1 -> 4[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 4 update commit index from 1 -> 4[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 1 3 [115 111 109 101 32 100 97 116 97] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 5 update commit index from 1 -> 4[0m
--- PASS: TestCommitWithoutNewTermEntry2AB (0.00s)
=== RUN   TestDuelingCandidates2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 3 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 3: canVote: false, isUptoData: false (m.LogTerm:0, m.Index:0, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:494: [0;37m[info] Node 3 received rejection from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 3 become candidate at term 2[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 1 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 1 handle requestVote rpc from Node 3: canVote: true, isUptoData: false (m.LogTerm:0, m.Index:0, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 3: canVote: true, isUptoData: false (m.LogTerm:0, m.Index:0, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:494: [0;37m[info] Node 3 received rejection from node 1 at term 2[0m
2020/07/14 20:59:24 raft.go:494: [0;37m[info] Node 3 received rejection from node 2 at term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 1  ents: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
--- PASS: TestDuelingCandidates2AB (0.00s)
=== RUN   TestCandidateConcede2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 3 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 3: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 3 received vote from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 3 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 3 prepare AppendMsg for Node 1: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 3 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 3)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 3 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 3 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 3 prepare AppendMsg for Node 1: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 1 (leader: 3)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 3)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 3 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 3 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 3 prepare AppendMsg for Node 1: [term:1 index:1  term:1 index:2 data:"force follower" ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 3 prepare AppendMsg for Node 2: [term:1 index:2 data:"force follower" ] [{EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 3 receives a match append response, update Node 1 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 3 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 3 prepare AppendMsg for Node 2: [term:1 index:2 data:"force follower" ] [{EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 3 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 1 (leader: 3)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 3)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [102 111 114 99 101 32 102 111 108 108 111 119 101 114] {} [] 0}][0m
--- PASS: TestCandidateConcede2AB (0.00s)
=== RUN   TestOldMessages2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 2 become candidate at term 2[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 1 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 1 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:1, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:1, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 2 received vote from node 1 at term 2[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 2 become leader at term 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2 ] [{EntryNormal 2 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:2 ] [{EntryNormal 2 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 2 2 [] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 2 2 [] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 1 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:2 ] [{EntryNormal 2 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 3[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 2) received a message with greater Term 3[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 3 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:2, m.Index:2, lastTerm:2, lastIndex:2)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 2) received a message with greater Term 3[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 3 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:2, m.Index:2, lastTerm:2, lastIndex:2)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 3[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:3 ] [{EntryNormal 3 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:3 ] [{EntryNormal 3 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [{EntryNormal 3 3 [] {} [] 0}] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [{EntryNormal 3 3 [] {} [] 0}] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 3 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 3 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 3 3] mid: 3[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 2 to 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:3 ] [{EntryNormal 3 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [3 3 3] mid: 3[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}] tmp: [] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 2 -> 3[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}] tmp: [] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 2 -> 3[0m
2020/07/14 20:59:24 raft.go:422: [0;37m[info] Node 1 (Term: 3) ignored a message with Term: 2[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}] new_entries_len: 1 li: 3[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:3 index:4 data:"somedata" ] [{EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:4 data:"somedata" ] [{EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}] tmp: [{EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 3][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0}] tmp: [{EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 3][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [3 4 4] mid: 4[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 3 to 4[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:3 index:4 data:"somedata" ] [{EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [4 4 4] mid: 4[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 3][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 3 -> 4[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 3][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 3 -> 4[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 4  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 3 3 [] {} [] 0} {EntryNormal 3 4 [115 111 109 101 100 97 116 97] {} [] 0}][0m
--- PASS: TestOldMessages2AB (0.00s)
=== RUN   TestProposal2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 4 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 4 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 5 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"somedata" ] [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"somedata" ] [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 data:"somedata" ] [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 data:"somedata" ] [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1  term:1 index:2 data:"somedata" ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1  term:1 index:2 data:"somedata" ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
    TestProposal2AB: raft_test.go:522: #3: empty log
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
    TestProposal2AB: raft_test.go:522: #2: empty log
    TestProposal2AB: raft_test.go:522: #3: empty log
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 4 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 4 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 4 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 4 at term 1[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
    TestProposal2AB: raft_test.go:522: #2: empty log
    TestProposal2AB: raft_test.go:522: #3: empty log
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 4 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 4 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 4 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 5 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 5 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 5 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 4 at term 1[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 5 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 4: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 5: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 4 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 5 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 4 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 0 1 1] mid: 0[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 5 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 4 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 5 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1  term:1 index:2 data:"somedata" ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1  term:1 index:2 data:"somedata" ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 4: [term:1 index:2 data:"somedata" ] [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 5: [term:1 index:2 data:"somedata" ] [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 4 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 1 2 2] mid: 1[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 5 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 0 2 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1  term:1 index:2 data:"somedata" ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1  term:1 index:2 data:"somedata" ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 4: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 4 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 5: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 5 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [115 111 109 101 100 97 116 97] {} [] 0}][0m
    TestProposal2AB: raft_test.go:522: #2: empty log
    TestProposal2AB: raft_test.go:522: #3: empty log
--- PASS: TestProposal2AB (0.00s)
=== RUN   TestHandleMessageType_MsgAppend2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 1 reject append rpc from Node 0[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 1 reject append rpc from Node 0[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [{EntryNormal 2 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 2 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [{EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 3[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [{EntryNormal 2 3 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 3[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 2  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 1: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 1 update commit index from 0 -> 2[0m
--- PASS: TestHandleMessageType_MsgAppend2AB (0.00s)
=== RUN   TestAllServerStepdown2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 1 (Term: 1) received a message with greater Term 3[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 3 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 1 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:3, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 1 reject append rpc from Node 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 1 (Term: 1) received a message with greater Term 3[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 3 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 1 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:3, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 1 reject append rpc from Node 2[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 1 (Term: 1) received a message with greater Term 3[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 3 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 1 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:3, m.Index:0, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 1 reject append rpc from Node 2[0m
--- PASS: TestAllServerStepdown2AB (0.00s)
=== RUN   TestHeartbeatUpdateCommit2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 ] [{EntryNormal 1 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 ] [{EntryNormal 1 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 2 become candidate at term 2[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:1, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 2 received vote from node 3 at term 2[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 2 become leader at term 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2 ] [{EntryNormal 2 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:2 ] [{EntryNormal 2 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 2 2 [] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2 ] [{EntryNormal 2 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] new_entries_len: 1 li: 2[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:3 ] [{EntryNormal 2 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [{EntryNormal 2 3 [] {} [] 0}] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 3 3] mid: 3[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 2 to 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] tmp: [] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 2 -> 3[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 1 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 ] [{EntryNormal 1 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 ] [{EntryNormal 1 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0}] new_entries_len: 1 li: 2[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2  term:1 index:3 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2  term:1 index:3 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0}] new_entries_len: 1 li: 3[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2  term:1 index:3  term:1 index:4 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2  term:1 index:3  term:1 index:4 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] new_entries_len: 1 li: 4[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2  term:1 index:3  term:1 index:4  term:1 index:5 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2  term:1 index:3  term:1 index:4  term:1 index:5 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0}] new_entries_len: 1 li: 5[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0} {EntryNormal 1 6 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2  term:1 index:3  term:1 index:4  term:1 index:5  term:1 index:6 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0} {EntryNormal 1 6 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2  term:1 index:3  term:1 index:4  term:1 index:5  term:1 index:6 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0} {EntryNormal 1 6 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 2 become candidate at term 2[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:1, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 2 received vote from node 3 at term 2[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 2 become leader at term 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2 ] [{EntryNormal 2 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:2 ] [{EntryNormal 2 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 2 2 [] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2 ] [{EntryNormal 2 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] new_entries_len: 1 li: 2[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:3 ] [{EntryNormal 2 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [{EntryNormal 2 3 [] {} [] 0}] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 3 3] mid: 3[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 2 to 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] tmp: [] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 2 -> 3[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] new_entries_len: 1 li: 3[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:4 ] [{EntryNormal 2 4 [] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] tmp: [{EntryNormal 2 4 [] {} [] 0}] [local commit: 3][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 4 4] mid: 4[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 3 to 4[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] tmp: [] [local commit: 3][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 3 -> 4[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] new_entries_len: 1 li: 4[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:5 ] [{EntryNormal 2 5 [] {} [] 0}] (start with idx 5)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] tmp: [{EntryNormal 2 5 [] {} [] 0}] [local commit: 4][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (5,6)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 5 5] mid: 5[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 4 to 5[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}] tmp: [] [local commit: 4][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 4 -> 5[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 1 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:0, m.Index:0, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:1 ] [{EntryNormal 1 1 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 3 (Match,Next) -> (1,2)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [1 1 1] mid: 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 0 -> 1[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0}] new_entries_len: 1 li: 1[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2 ] [{EntryNormal 1 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2 ] [{EntryNormal 1 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0}] new_entries_len: 1 li: 2[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2  term:1 index:3 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2  term:1 index:3 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0}] new_entries_len: 1 li: 3[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2  term:1 index:3  term:1 index:4 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2  term:1 index:3  term:1 index:4 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] new_entries_len: 1 li: 4[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2  term:1 index:3  term:1 index:4  term:1 index:5 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2  term:1 index:3  term:1 index:4  term:1 index:5 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0}] new_entries_len: 1 li: 5[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0} {EntryNormal 1 6 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2  term:1 index:3  term:1 index:4  term:1 index:5  term:1 index:6 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0} {EntryNormal 1 6 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 3: [term:1 index:2  term:1 index:3  term:1 index:4  term:1 index:5  term:1 index:6 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [] {} [] 0} {EntryNormal 1 6 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 2 become candidate at term 2[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 3 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 3 handle requestVote rpc from Node 2: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:1, lastTerm:1, lastIndex:1)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 2 received vote from node 3 at term 2[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 2 become leader at term 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2 ] [{EntryNormal 2 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:2 ] [{EntryNormal 2 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0}] tmp: [{EntryNormal 2 2 [] {} [] 0}] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (2,3)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 2 2] mid: 2[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 1 to 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2 ] [{EntryNormal 2 2 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [] [local commit: 1][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 1 -> 2[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] new_entries_len: 1 li: 2[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:3 ] [{EntryNormal 2 3 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0}] tmp: [{EntryNormal 2 3 [] {} [] 0}] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (3,4)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 3 3] mid: 3[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 2 to 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] tmp: [] [local commit: 2][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 2 -> 3[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] new_entries_len: 1 li: 3[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:4 ] [{EntryNormal 2 4 [] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0}] tmp: [{EntryNormal 2 4 [] {} [] 0}] [local commit: 3][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 4 4] mid: 4[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 3 to 4[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] tmp: [] [local commit: 3][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 3 -> 4[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] new_entries_len: 1 li: 4[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:5 ] [{EntryNormal 2 5 [] {} [] 0}] (start with idx 5)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0}] tmp: [{EntryNormal 2 5 [] {} [] 0}] [local commit: 4][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (5,6)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 5 5] mid: 5[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 4 to 5[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}] tmp: [] [local commit: 4][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 4 -> 5[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}] new_entries_len: 1 li: 5[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:6 ] [{EntryNormal 2 6 [] {} [] 0}] (start with idx 6)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0}] tmp: [{EntryNormal 2 6 [] {} [] 0}] [local commit: 5][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (6,7)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 6 6] mid: 6[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 5 to 6[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0}] tmp: [] [local commit: 5][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 5 -> 6[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0}] new_entries_len: 1 li: 6[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6  term:2 index:7 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:7 ] [{EntryNormal 2 7 [] {} [] 0}] (start with idx 7)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0}] tmp: [{EntryNormal 2 7 [] {} [] 0}] [local commit: 6][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (7,8)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 7 7] mid: 7[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 6 to 7[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6  term:2 index:7 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0}] tmp: [] [local commit: 6][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 6 -> 7[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0}] new_entries_len: 1 li: 7[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6  term:2 index:7  term:2 index:8 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:8 ] [{EntryNormal 2 8 [] {} [] 0}] (start with idx 8)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0}] tmp: [{EntryNormal 2 8 [] {} [] 0}] [local commit: 7][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (8,9)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 8 8] mid: 8[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 7 to 8[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6  term:2 index:7  term:2 index:8 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0}] tmp: [] [local commit: 7][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 7 -> 8[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0}] new_entries_len: 1 li: 8[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6  term:2 index:7  term:2 index:8  term:2 index:9 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:9 ] [{EntryNormal 2 9 [] {} [] 0}] (start with idx 9)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0}] tmp: [{EntryNormal 2 9 [] {} [] 0}] [local commit: 8][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (9,10)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 9 9] mid: 9[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 8 to 9[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6  term:2 index:7  term:2 index:8  term:2 index:9 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0}] tmp: [] [local commit: 8][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 8 -> 9[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0}] new_entries_len: 1 li: 9[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6  term:2 index:7  term:2 index:8  term:2 index:9  term:2 index:10 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:10 ] [{EntryNormal 2 10 [] {} [] 0}] (start with idx 10)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0}] tmp: [{EntryNormal 2 10 [] {} [] 0}] [local commit: 9][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (10,11)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 10 10] mid: 10[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 9 to 10[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6  term:2 index:7  term:2 index:8  term:2 index:9  term:2 index:10 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0}] tmp: [] [local commit: 9][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 9 -> 10[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0}] new_entries_len: 1 li: 10[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6  term:2 index:7  term:2 index:8  term:2 index:9  term:2 index:10  term:2 index:11 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:11 ] [{EntryNormal 2 11 [] {} [] 0}] (start with idx 11)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0}] tmp: [{EntryNormal 2 11 [] {} [] 0}] [local commit: 10][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (11,12)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 11 11] mid: 11[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 10 to 11[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6  term:2 index:7  term:2 index:8  term:2 index:9  term:2 index:10  term:2 index:11 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0}] tmp: [] [local commit: 10][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 10 -> 11[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 2 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0}] new_entries_len: 1 li: 11[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 2 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0} {EntryNormal 2 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6  term:2 index:7  term:2 index:8  term:2 index:9  term:2 index:10  term:2 index:11  term:2 index:12 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0} {EntryNormal 2 12 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 3: [term:2 index:12 ] [{EntryNormal 2 12 [] {} [] 0}] (start with idx 12)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0}] tmp: [{EntryNormal 2 12 [] {} [] 0}] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0} {EntryNormal 2 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 2 receives a match append response, update Node 3 (Match,Next) -> (12,13)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [0 12 12] mid: 12[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 2 update commit index from 11 to 12[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 2 prepare AppendMsg for Node 1: [term:2 index:2  term:2 index:3  term:2 index:4  term:2 index:5  term:2 index:6  term:2 index:7  term:2 index:8  term:2 index:9  term:2 index:10  term:2 index:11  term:2 index:12 ] [{EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0} {EntryNormal 2 12 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0} {EntryNormal 2 12 [] {} [] 0}] tmp: [] [local commit: 11][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 3: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 2 2 [] {} [] 0} {EntryNormal 2 3 [] {} [] 0} {EntryNormal 2 4 [] {} [] 0} {EntryNormal 2 5 [] {} [] 0} {EntryNormal 2 6 [] {} [] 0} {EntryNormal 2 7 [] {} [] 0} {EntryNormal 2 8 [] {} [] 0} {EntryNormal 2 9 [] {} [] 0} {EntryNormal 2 10 [] {} [] 0} {EntryNormal 2 11 [] {} [] 0} {EntryNormal 2 12 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 3 update commit index from 11 -> 12[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 1 (Term: 1) received a message with greater Term 2[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 2 (leader: 2)[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 2 (leader: 2)[0m
--- PASS: TestHeartbeatUpdateCommit2AB (0.00s)
=== RUN   TestLeaderIncreaseNext2AB
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 3  ents: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 1 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 log.go:76: [0;37m[info] offset(first): 1  stabled(last): 0  ents: [][0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 3 become follower at term 0 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:341: [0;37m[info] Node 1 become candidate at term 1[0m
2020/07/14 20:59:24 raft.go:413: [0;37m[info] Node 2 (Term: 0) received a message with greater Term 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 0)[0m
2020/07/14 20:59:24 raft.go:636: [0;37m[info] Node 2 handle requestVote rpc from Node 1: canVote: true, isUptoData: true (m.LogTerm:1, m.Index:3, lastTerm:0, lastIndex:0)[0m
2020/07/14 20:59:24 raft.go:492: [0;37m[info] Node 1 received vote from node 2 at term 1[0m
2020/07/14 20:59:24 raft.go:374: [0;37m[info] Node 1 become leader at term 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:4 ] [{EntryNormal 1 4 [] {} [] 0}] (start with idx 4)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:328: [0;37m[info] Node 2 become follower at term 1 (leader: 1)[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 3[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:3  term:1 index:4 ] [{EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] (start with idx 3)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 2[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:2  term:1 index:3  term:1 index:4 ] [{EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] (start with idx 2)[0m
2020/07/14 20:59:24 raft.go:665: [0;37m[info] Follower Node 2 reject append rpc from Node 1[0m
2020/07/14 20:59:24 raft.go:559: [0;37m[info] Leader Node 1 receives a rejection append response, update Node 2 Next -> 1[0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:1  term:1 index:2  term:1 index:3  term:1 index:4 ] [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] (start with idx 1)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [] tmp: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (4,5)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [4 4] mid: 4[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 0 to 4[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] tmp: [] [local commit: 0][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 0 -> 4[0m
2020/07/14 20:59:24 raft.go:530: [0;37m[info] Leader 1 before append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] new_entries_len: 1 li: 4[0m
2020/07/14 20:59:24 raft.go:533: [0;37m[info] Leader 1 after append entry: unstable: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:223: [0;37m[info] Node 1 prepare AppendMsg for Node 2: [term:1 index:5 data:"somedata" ] [{EntryNormal 1 5 [115 111 109 101 100 97 116 97] {} [] 0}] (start with idx 5)[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0}] tmp: [{EntryNormal 1 5 [115 111 109 101 100 97 116 97] {} [] 0}] [local commit: 4][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:569: [0;37m[info] Leader Node 1 receives a match append response, update Node 2 (Match,Next) -> (5,6)[0m
2020/07/14 20:59:24 raft.go:598: [0;37m[info] [MaybeUpdayeCommit] matches: [5 5] mid: 5[0m
2020/07/14 20:59:24 raft.go:610: [0;37m[info] Node 1 update commit index from 4 to 5[0m
2020/07/14 20:59:24 raft.go:684: [0;37m[info] before append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [115 111 109 101 100 97 116 97] {} [] 0}] tmp: [] [local commit: 4][0m
2020/07/14 20:59:24 raft.go:687: [0;37m[info] after append entries in follower 2: entries: [{EntryNormal 1 1 [] {} [] 0} {EntryNormal 1 2 [] {} [] 0} {EntryNormal 1 3 [] {} [] 0} {EntryNormal 1 4 [] {} [] 0} {EntryNormal 1 5 [115 111 109 101 100 97 116 97] {} [] 0}][0m
2020/07/14 20:59:24 raft.go:691: [0;37m[info] Node 2 update commit index from 4 -> 5[0m
--- PASS: TestLeaderIncreaseNext2AB (0.00s)
PASS
ok  	github.com/pingcap-incubator/tinykv/raft	0.714s
